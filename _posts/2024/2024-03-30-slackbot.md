---
title: ìŠ¬ë™ ë´‡ ë§Œë“¤ê¸° - TIL, ì¼ì •ê´€ë¦¬ ìŠ¬ë™ ë´‡ ë§Œë“¤ê¸°
author: youngDaLee
date: 2024-03-30 12:00:00 +0900
categories: [DEV]
tags: [SlackBot,ìë™í™”]
---

> ì´ ê¸€ì€ 2024ë…„ 03ì›” [Velog](https://velog.io/@youngda/%EC%8A%AC%EB%9E%99-%EB%B4%87-%EB%A7%8C%EB%93%A4%EA%B8%B0-TIL-%EC%9D%BC%EC%A0%95%EA%B4%80%EB%A6%AC-%EC%8A%AC%EB%9E%99-%EB%B4%87-%EB%A7%8C%EB%93%A4%EA%B8%B0)ì— ì‘ì„±í–ˆë˜ ê¸€ ì…ë‹ˆë‹¤


# ì‘ì—… ê³„ê¸°
ê³µë¶€ ëª¨ì„ ë©”ì‹ ì € ì•±ì„ ë””ìŠ¤ì½”ë“œì—ì„œ ìŠ¬ë™ìœ¼ë¡œ ì´ì „í•˜ìëŠ” ì–˜ê¸°ê°€ ë‚˜ì™”ìŠµë‹ˆë‹¤.
ì´ìœ ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤
* ì‚¬ìš©í•˜ê³  ì‹¶ì€ ë´‡(ìš”ì¦˜it, ì»¤ë¦¬ì–´ë¦¬)ì´ ìŠ¬ë™ì— ìˆìŒ
* íšŒì‚¬ì—ì„œ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì¢€ ë” ì¹œìˆ™í•¨
* ë””ìŠ¤ì½”ë“œê°€ ìŠ¬ë™ì— ë¹„í•´ ê°–ëŠ” ê°•ì ì´ ë¬´ë£ŒíŒì„ì—ë„ íˆìŠ¤í† ë¦¬ë¥¼ ë³´ê´€í•  ìˆ˜ ìˆëŠ” ê²ƒì¸ë°, ìš°ë¦¬ì—ê²Œ í•„ìš”í•œ ê¸°ëŠ¥ì€ ì•„ë‹˜(ë””ìŠ¤ì½”ë“œì— ê³µìœ í•˜ëŠ” ë‚´ìš©ì€ ê°ì ê°€ì§€ê³  ìˆìŒ)
* ë””ìŠ¤ì½”ë“œ ìŠ¤ë ˆë“œ ê¸°ëŠ¥ ë¶ˆí¸

ì´ê²ƒ ì €ê²ƒ ì“°ë‹¤ ë³´ë‹ˆ TIL ì•ŒëŒ ë´‡ì´ ìˆìœ¼ë©´ ì¢€ ë” ì¢‹ì„ ê²ƒ ê°™ë‹¤ëŠ” ì˜ê²¬ì´ ë‚˜ì™”ê³ , TIL ê²¸ ì¼ì • ê´€ë¦¬ë¥¼ í•  ìˆ˜ ìˆëŠ” ë´‡ì„ ë§Œë“¤ì–´ë³´ì•˜ìŠµë‹ˆë‹¤.

# ê³¼ì •
## 1. ìŠ¬ë™ ë´‡ ìƒì„±
### 1-1. Create an App
![](https://velog.velcdn.com/images/youngda/post/7ee1b1aa-c8fb-4767-b6b2-4d4f70b9b9f2/image.png)
https://api.slack.com/apps/ ì—ì„œ Create an Appìœ¼ë¡œ ë´‡ì„ ìƒì„±í•©ë‹ˆë‹¤

![](https://velog.velcdn.com/images/youngda/post/a18f70c2-6007-4694-b137-c52b63387b47/image.png)
ì•±ì„ ìƒì„±í•  ì›Œí¬ìŠ¤í˜ì´ìŠ¤ë¥¼ ì§€ì •í•©ë‹ˆë‹¤

![](https://velog.velcdn.com/images/youngda/post/658e7645-6f0a-424d-961e-680fd0abd83b/image.png)

ë´‡ ì´ë¦„ì„ ì§€ì •í•˜ê³ , ì„¸íŒ…ê°’ì„ ìˆ˜ì •í•©ë‹ˆë‹¤. ì´ ê°’ë“¤ì€ ì¶”í›„ ë³€ê²½ ê°€ëŠ¥í•©ë‹ˆë‹¤.

![](https://velog.velcdn.com/images/youngda/post/ed4f89f2-493c-4331-ad46-9cc35c22d412/image.png)

### 1-2. (í† í° ìƒì„±)
![](https://velog.velcdn.com/images/youngda/post/cd9840bb-afad-4bdb-b17c-5f1d6312c825/image.png)
![](https://velog.velcdn.com/images/youngda/post/e8a1b159-a879-4a4b-a30b-e7b57b6ffec8/image.png)

Basic Information -> App-Level Tokensì—ì„œ í† í°ì„ ìƒì„±í•  ìˆ˜ ìˆë‹¤

### 1-3. ì´ë¦„ ìƒì„±

![](https://velog.velcdn.com/images/youngda/post/05d631b2-9cbe-493a-a60f-b6a53a6f1a79/image.png)

### 1-4. Install to Workspace
![](https://velog.velcdn.com/images/youngda/post/c6087e4c-8b0e-48e5-b020-d3a4ecbe68af/image.png)
![](https://velog.velcdn.com/images/youngda/post/54492481-4c80-4303-9c47-5c268d7d0ce0/image.png)



### 1-5. Incoming Webhooks ìƒì„±
> Incoming Webhooks : ìŠ¬ë™ í¬ë§·ì— ì¼ì¹˜í•˜ëŠ” ë°ì´í„°ë¥¼ ì „ì†¡í•˜ë©´ ìŠ¬ë™ ì±„ë„ì— ë³´ë‚´ì£¼ëŠ” ê¸°ëŠ¥

![](https://velog.velcdn.com/images/youngda/post/e00be391-9f08-4528-9bee-a47e2a4bad23/image.png)




## 2. Incoming Webhooksë¥¼ ì´ìš©í•œ ìŠ¬ë™ ë©”ì„¸ì§€ ìƒì„±

### 2-1. requestë¡œ ìŠ¬ë™ ë©”ì„¸ì§€ ë³´ë‚´ëŠ” python ìŠ¤í¬ë¦½íŠ¸ ìƒì„±
```python
import os
import requests
from datetime import datetime


TIL_WEBHOOK_URL = os.environ.get('TIL_WEBHOOK_URL')

def post_message(message):
    requests.post(TIL_WEBHOOK_URL, json={"text": message})

date_string = datetime.now().strftime("%Y-%m-%d")
TIL_NOTICE = f"""<!channel> ì˜¤ëŠ˜ì˜ TILì„ ê³µìœ í•  ì‹œê°„ì…ë‹ˆë‹¤! ì•„ë˜ì˜ í…œí”Œë¦¿ì„ ì°¸ê³ í•˜ì—¬ ì‘ì„±í•´ì£¼ì„¸ìš”.

**[í…œí”Œë¦¿]**

ğŸ“† {date_string}
â° ê³µë¶€ ì‹œê°„
> hì‹œê°„ më¶„

ğŸ“š ê³µë¶€í•œ ë‚´ìš©
* ê³µë¶€í•œ ë‚´ìš©ì— ëŒ€í•´ ê°„ë‹¨íˆ ì •ë¦¬í•´ì£¼ì„¸ìš”.
* TILì„ ì •ë¦¬í•œ ë§í¬ë¥¼ ê³µìœ í•´ì£¼ì…”ë„ ì¢‹ìŠµë‹ˆë‹¤

ğŸ’­ íšŒê³ 
* ì˜¤ëŠ˜ì˜ ê³µë¶€ë¥¼ í†µí•´ ëŠë‚€ ì ì„ ììœ ë¡­ê²Œ ì ì–´ì£¼ì„¸ìš”.
"""

if __name__ == "__main__":
    post_message(TIL_NOTICE)
```
ìœ„ì™€ ê°™ì´ ì½”ë“œë¥¼ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.

í•œ ë¶€ë¶„ì”© ê°„ë‹¨í•˜ê²Œ ì„¤ëª…ì„ ë“œë¦¬ìë©´
```python
TIL_WEBHOOK_URL = os.environ.get('TIL_WEBHOOK_URL')
```
* Incoming Webhook í™˜ê²½ë³€ìˆ˜ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. GitHub Secretsë¥¼ ìƒì„±í•´ì„œ Webhook Urlì„ ë“±ë¡í•©ë‹ˆë‹¤


```python
def post_message(message):
    requests.post(TIL_WEBHOOK_URL, json={"text": message})
```
* Webhook URLì— Postë¡œ ë°ì´í„°ë¥¼ ë³´ëƒ…ë‹ˆë‹¤. ì•„ë˜ ëª…ë ¹ê³¼ ë™ì¼í•œ ì—­í• ì„ í•©ë‹ˆë‹¤

```
curl -X POST -H 'Content-type: application/json' --data '{"text":message}' TIL_WEBHOOK_URL
```


### 2-2. Github Secret ë“±ë¡
ë¯¼ê°í•œ ì •ë³´ë¥¼ ìˆ¨ê¸°ê¸° ìœ„í•´ Incoming Webhookì„ Githubì˜ Secretì— ë“±ë¡í•´ ì‚¬ìš©í•©ë‹ˆë‹¤
![](https://velog.velcdn.com/images/youngda/post/25cb9547-3003-40ca-be73-26ac91f7d02c/image.png)
![](https://velog.velcdn.com/images/youngda/post/264593da-95ba-4760-a5a3-0d2b543d4077/image.png)
![](https://velog.velcdn.com/images/youngda/post/4e9ff1a7-adba-4041-aa4d-c376f7b504ad/image.png)

### 2-3. Github action ë“±ë¡
python ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ” Github actionì„ ë“±ë¡í•©ë‹ˆë‹¤
![](https://velog.velcdn.com/images/youngda/post/8e946fa4-e72c-4bc2-b69a-687707ac1fa6/image.png)
![](https://velog.velcdn.com/images/youngda/post/b72d66a5-859f-4a89-8f78-3dfa3f239f42/image.png)

ì›Œí¬í”Œë¡œ .yml íŒŒì¼ì€ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í–ˆìŠµë‹ˆë‹¤
```yml
name: Python application

on:
  schedule:
    - cron: "0 23 * * *"
  workflow_dispatch:
    inputs:
      logLevel:
        description: "Log level"
        required: true
        default: "warning"
      tags:
        description: "Test scenario tags"

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
      - name: Set up Python 3.12
        uses: actions/setup-python@v2
        with:
          python-version: 3.12
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install bs4 requests
      - run: python actions/til_notice.py
        env: # Or as an environment variable
          TIL_WEBHOOK_URL: ${{ secrets.TIL_WEBHOOK_URL }}
```

### 2-4. í…ŒìŠ¤íŠ¸
![](https://velog.velcdn.com/images/youngda/post/2b8a9522-4a0f-4ae8-9c69-bfbcaa979eb6/image.png)
* ê¹ƒí—™ì•¡ì…˜ì„ ìˆ˜ë™ ì‹¤í–‰í•´ì„œ ì•Œë¦¼ì´ ì˜ ì˜¨ ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.


# ì°¸ê³ 
* [ì¹´ì¹´ì˜¤í˜ì´ ë¸”ë¡œê·¸ - 5ë¶„ ë§Œì— ë°°ìš°ëŠ” ì¼ì • ê´€ë¦¬ ìŠ¬ë™ë´‡ ë§Œë“œëŠ” ë°©ë²•](https://tech.kakaopay.com/post/slack-google-integration/)
* [ìŠ¬ë™ ì›¹í›…ê³¼ ê¹ƒí—™ ì•¡ì…˜ì„ ì´ìš©í•´ ì•Œë¦¼ ë´‡ ë§Œë“¤ê¸°](https://www.singun11.wtf/posts/TIL-slack-web-hook-and-github-action/)
* [GitHub Actionì„ ì´ìš©í•œ ì•Œë¦¼ ìë™í™”](https://deepbaksu.github.io/2020/09/18/slack-github-action-automation/)